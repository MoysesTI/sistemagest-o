<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrismaTech - Gestão de Aulas</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="description"
        content="Sistema de gestão de turmas, professores e controle de aulas - PrismaTech Code Academy">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="assets/logo.png" alt="PrismaTech" class="sidebar-logo">
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-item active" data-section="dashboard" onclick="showSection('dashboard')">
                        <i class="bi bi-grid-1x2 nav-icon"></i>
                        <span>Overview</span>
                    </div>
                    <div class="nav-item" data-section="turmas" onclick="showSection('turmas')">
                        <i class="bi bi-collection nav-icon"></i>
                        <span>Turmas</span>
                    </div>
                    <div class="nav-item" data-section="cursos" onclick="showSection('cursos')">
                        <i class="bi bi-book nav-icon"></i>
                        <span>Cursos</span>
                    </div>
                    <div class="nav-item" data-section="professores" onclick="showSection('professores')">
                        <i class="bi bi-people nav-icon"></i>
                        <span>Professores</span>
                    </div>
                    <div class="nav-item" data-section="cronograma" onclick="showSection('cronograma')">
                        <i class="bi bi-calendar3 nav-icon"></i>
                        <span>Cronograma</span>
                    </div>
                    <div class="nav-item nav-item-admin" data-section="relatorios" onclick="showSection('relatorios')">
                        <i class="bi bi-bar-chart-line nav-icon"></i>
                        <span>Relatórios</span>
                    </div>
                    <div class="nav-item" data-section="dados" onclick="showSection('dados')">
                        <i class="bi bi-gear nav-icon"></i>
                        <span>Configurações</span>
                    </div>
                </div>
            </nav>


            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar" id="user-avatar">PT</div>

                    <div class="user-info-sidebar">

                        <div class="user-name-sidebar" id="user-name">Carregando...</div>
                        <div class="user-email-sidebar" id="user-email">...</div>

                    </div>
                    <button class="btn-logout" onclick="API.logout()" title="Sair">
                        <i class="bi bi-box-arrow-right"></i>
                    </button>
                </div>

            </div>
        </aside>

        <!-- Overlay Mobile -->
        <div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header>
                <div class="header-left">
                    <button class="menu-toggle" onclick="toggleSidebar()">
                        <i class="bi bi-list"></i>
                    </button>
                    <h1 class="page-title" id="page-title">Overview</h1>
                </div>

                <div class="header-center">
                    <div class="search-box">
                        <i class="bi bi-search"></i>
                        <input type="text" placeholder="Buscar..." id="global-search">
                    </div>
                </div>

                <div class="header-right">
                    <button class="header-btn" id="btn-header-action">
                        <i class="bi bi-plus-lg"></i>
                        <span id="btn-header-text">Nova Turma</span>
                    </button>
                    <button class="header-icon-btn">
                        <i class="bi bi-bell"></i>
                    </button>
                </div>
            </header>

            <div class="container">
                <!-- ==================== DASHBOARD ==================== -->
                <section id="section-dashboard" class="content-section">
                    <div class="page-header">
                        <div>
                            <h2 class="page-header-title">Dashboard</h2>
                            <p class="page-header-subtitle">Visão geral do sistema</p>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: rgba(52, 152, 219, 0.15); color: #3498db;">
                                <i class="bi bi-collection"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-total-turmas">0</div>
                                <div class="stat-label">Total Turmas</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: rgba(46, 204, 113, 0.15); color: #2ecc71;">
                                <i class="bi bi-play-circle"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-turmas-ativas">0</div>
                                <div class="stat-label">Turmas Ativas</div>
                            </div>
                        </div>
                        <div class="stat-card stat-card-admin">
                            <div class="stat-icon" style="background: rgba(155, 89, 182, 0.15); color: #9b59b6;">
                                <i class="bi bi-people"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-professores">0</div>
                                <div class="stat-label">Professores</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: rgba(241, 196, 15, 0.15); color: #f1c40f;">
                                <i class="bi bi-book"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-value" id="stat-cursos">0</div>
                                <div class="stat-label">Cursos</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <!-- Próximas Aulas -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="bi bi-calendar-event"></i> Aulas de Hoje</h3>
                                <button class="btn btn-sm btn-secondary" onclick="showSection('cronograma')">
                                    <i class="bi bi-calendar3"></i> Ver Cronograma
                                </button>
                            </div>
                            <div class="card-body" id="proximas-aulas">
                                <p class="loading-text">Carregando...</p>
                            </div>
                        </div>

                        <!-- Professores / Meus Dados -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title" id="title-professores-card">
                                    <i class="bi bi-trophy"></i> Top Professores
                                </h3>
                            </div>
                            <div class="card-body" id="top-professores">
                                <p class="loading-text">Carregando...</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== TURMAS ==================== -->
                <section id="section-turmas" class="content-section" style="display: none;">
                    <div class="page-header">
                        <div>
                            <h2 class="page-header-title">Gestão de Turmas</h2>
                            <p class="page-header-subtitle">Gerencie suas turmas e acompanhe o progresso</p>
                        </div>
                        <button id="btn-add-turma" class="btn btn-accent" onclick="showNovaTurmaModal()">
                            <i class="bi bi-plus-lg"></i> Nova Turma
                        </button>
                    </div>

                    <div class="controls">
                        <div class="filter-options">
                            <button class="filter-btn active" data-filter="all">Todas</button>
                            <button class="filter-btn" data-filter="SEGUNDA">Segunda</button>
                            <button class="filter-btn" data-filter="TERCA">Terça</button>
                            <button class="filter-btn" data-filter="QUARTA">Quarta</button>
                            <button class="filter-btn" data-filter="QUINTA">Quinta</button>
                            <button class="filter-btn" data-filter="SEXTA">Sexta</button>
                            <button class="filter-btn" data-filter="SABADO">Sábado</button>
                        </div>
                        <input type="text" class="search-input" placeholder="Buscar turma..." id="search-turmas">
                    </div>

                    <div class="turma-grid" id="turma-container">
                        <!-- Turmas via JS -->
                    </div>
                </section>

                <!-- ==================== CURSOS ==================== -->
                <section id="section-cursos" class="content-section" style="display: none;">
                    <div class="page-header">
                        <div>
                            <h2 class="page-header-title">Gestão de Cursos</h2>
                            <p class="page-header-subtitle">Organize cursos, módulos e aulas</p>
                        </div>
                        <button class="btn btn-accent admin-only" onclick="showNovoCursoModal()">
                            <i class="bi bi-plus-lg"></i> Novo Curso
                        </button>
                    </div>

                    <div class="cursos-container" id="cursos-container">
                        <!-- Cursos via JS -->
                    </div>
                </section>

                <!-- ==================== PROFESSORES ==================== -->
                <section id="section-professores" class="content-section" style="display: none;">
                    <div class="page-header">
                        <div>
                            <h2 class="page-header-title">Professores</h2>
                            <p class="page-header-subtitle">Cadastro e gestão de professores MEI</p>
                        </div>
                        <button class="btn btn-accent admin-only" onclick="showNovoProfessorModal()">
                            <i class="bi bi-plus-lg"></i> Novo Professor
                        </button>
                    </div>

                    <div class="professores-grid" id="professores-container">
                        <!-- Professores via JS -->
                    </div>
                </section>

                <!-- ==================== CRONOGRAMA ==================== -->
                <section id="section-cronograma" class="content-section" style="display: none;">
                    <div class="page-header">
                        <div>
                            <h2 class="page-header-title">Cronograma</h2>
                            <p class="page-header-subtitle">Visualização semanal de aulas e tarefas</p>
                        </div>
                        <div class="page-header-actions">
                            <button class="btn btn-secondary" onclick="importarCronograma()">
                                <i class="bi bi-cloud-download"></i> Importar Turmas
                            </button>
                            <button class="btn btn-accent" onclick="showNovaTarefaModal()">
                                <i class="bi bi-plus-lg"></i> Nova Tarefa
                            </button>
                        </div>
                    </div>

                    <div class="cronograma-controls">
                        <div class="cronograma-nav">
                            <button class="btn btn-icon" onclick="mudarSemana(-1)">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                            <span id="cronograma-periodo">Carregando...</span>
                            <button class="btn btn-icon" onclick="mudarSemana(1)">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="mudarSemana(0)">Hoje</button>
                        </div>
                        <div class="cronograma-filters">
                            <select id="cronograma-professor" class="form-select admin-only" style="min-width: 180px;">
                                <option value="">Meu Cronograma</option>
                                <!-- Professores via JS -->
                            </select>
                            <input type="date" id="cronograma-data-inicio" class="form-input">
                            <span>até</span>
                            <input type="date" id="cronograma-data-fim" class="form-input">
                            <button class="btn btn-sm btn-primary" onclick="filtrarCronograma()">Filtrar</button>
                        </div>
                    </div>


                    <div class="cronograma-grid" id="cronograma-container">
                        <!-- Cronograma via JS -->
                    </div>
                </section>

                <!-- ==================== RELATÓRIOS ==================== -->
                <section id="section-relatorios" class="content-section admin-only" style="display: none;">
                    <div class="page-header">
                        <div>
                            <h2 class="page-header-title">Relatórios Financeiros</h2>
                            <p class="page-header-subtitle">Métricas, validações e valores por professor</p>
                        </div>
                        <div class="page-header-actions">
                            <button class="btn btn-warning" onclick="recalcularValores()">
                                <i class="bi bi-arrow-clockwise"></i> Recalcular
                            </button>
                            <button class="btn btn-secondary" onclick="exportarRelatorio()">
                                <i class="bi bi-download"></i> Exportar
                            </button>
                        </div>
                    </div>

                    <!-- Filtros do Relatório - Card Compacto -->
                    <div class="relatorio-filtros">
                        <div class="filtro-group">
                            <label><i class="bi bi-calendar3"></i> Período</label>
                            <div class="filtro-dates">
                                <input type="date" id="relatorio-data-inicio" class="form-input">
                                <span class="filtro-separator">até</span>
                                <input type="date" id="relatorio-data-fim" class="form-input">
                            </div>
                        </div>
                        <div class="filtro-group">
                            <label><i class="bi bi-person"></i> Professor</label>
                            <select id="relatorio-professor" class="form-select">
                                <option value="">Todos os Professores</option>
                            </select>
                        </div>
                        <button class="btn btn-accent btn-lg" onclick="gerarRelatorio()">
                            <i class="bi bi-graph-up"></i> Gerar Relatório
                        </button>
                    </div>

                    <!-- Cards de Métricas - Design Moderno com Gradientes -->
                    <div class="relatorio-metrics-grid">
                        <div class="metric-card metric-card-orange">
                            <div class="metric-icon">
                                <i class="bi bi-clock-history"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value" id="rel-total-horas">0h</div>
                                <div class="metric-label">Total de Horas</div>
                            </div>
                        </div>
                        <div class="metric-card metric-card-green">
                            <div class="metric-icon">
                                <i class="bi bi-currency-dollar"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value" id="rel-total-valor">R$ 0,00</div>
                                <div class="metric-label">Valor Total</div>
                            </div>
                        </div>
                        <div class="metric-card metric-card-blue">
                            <div class="metric-icon">
                                <i class="bi bi-check2-circle"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value" id="rel-qtd-itens">0</div>
                                <div class="metric-label">Itens Validados</div>
                            </div>
                        </div>
                        <div class="metric-card metric-card-purple">
                            <div class="metric-icon">
                                <i class="bi bi-people-fill"></i>
                            </div>
                            <div class="metric-content">
                                <div class="metric-value" id="rel-qtd-profs">0</div>
                                <div class="metric-label">Professores</div>
                            </div>
                        </div>
                    </div>

                    <!-- Detalhamento por Professor - Tabela Moderna -->
                    <div class="relatorio-table-card">
                        <div class="table-card-header">
                            <h3><i class="bi bi-table"></i> Detalhamento por Professor</h3>
                        </div>
                        <div class="table-card-body" id="relatorio-detalhes">
                            <div class="empty-state">
                                <i class="bi bi-bar-chart-line"></i>
                                <p>Selecione um período e clique em "Gerar Relatório"</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ==================== CONFIGURAÇÕES ==================== -->

                <section id="section-dados" class="content-section" style="display: none;">
                    <div class="page-header">
                        <div>
                            <h2 class="page-header-title">Configurações</h2>
                            <p class="page-header-subtitle">Parâmetros do sistema</p>
                        </div>
                    </div>

                    <div class="settings-grid">
                        <!-- Card Meu Perfil -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="bi bi-person-circle"></i> Meu Perfil</h3>
                            </div>
                            <div class="card-body" id="meu-perfil">
                                <!-- Perfil via JS -->
                                <div class="profile-info">
                                    <div class="profile-avatar" id="profile-avatar"></div>
                                    <div class="profile-details">
                                        <p><strong>Nome:</strong> <span id="profile-nome">Carregando...</span></p>
                                        <p><strong>Email:</strong> <span id="profile-email">Carregando...</span></p>
                                        <p><strong>Função:</strong> <span id="profile-role"
                                                class="role-badge">Carregando...</span></p>
                                        <p><strong>Telefone:</strong> <span id="profile-telefone">-</span></p>
                                    </div>
                                </div>
                                <div class="profile-actions">
                                    <button class="btn btn-secondary" onclick="showEditProfileModal()">
                                        <i class="bi bi-pencil"></i> Editar Perfil
                                    </button>
                                    <button class="btn btn-secondary" onclick="showChangePasswordModal()">
                                        <i class="bi bi-key"></i> Alterar Senha
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Card Importação e Cronograma -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="bi bi-calendar-check"></i> Cronograma e Importação</h3>
                            </div>
                            <div class="card-body">
                                <div class="config-item">
                                    <div class="config-info">
                                        <strong>Importar Cronograma</strong>
                                        <p>Importa as turmas ativas para o cronograma semanal</p>
                                    </div>
                                    <button class="btn btn-accent" onclick="importarCronograma()">
                                        <i class="bi bi-cloud-download"></i> Importar
                                    </button>
                                </div>
                                <div class="config-item">
                                    <div class="config-info">
                                        <strong>Minhas Turmas</strong>
                                        <p>Visualize suas turmas atribuídas e progresso</p>
                                    </div>
                                    <button class="btn btn-secondary" onclick="showSection('turmas')">
                                        <i class="bi bi-collection"></i> Ver Turmas
                                    </button>
                                </div>
                                <div class="config-item">
                                    <div class="config-info">
                                        <strong>Meus Cursos</strong>
                                        <p>Edite módulos e aulas dos seus cursos</p>
                                    </div>
                                    <button class="btn btn-secondary" onclick="showSection('cursos')">
                                        <i class="bi bi-book"></i> Ver Cursos
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Card de Estatísticas Pessoais -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="bi bi-graph-up"></i> Minhas Estatísticas</h3>
                            </div>
                            <div class="card-body" id="minhas-estatisticas">
                                <div class="stats-mini-grid">
                                    <div class="stat-mini">
                                        <span class="stat-mini-value" id="stat-minhas-turmas">0</span>
                                        <span class="stat-mini-label">Turmas</span>
                                    </div>
                                    <div class="stat-mini">
                                        <span class="stat-mini-value" id="stat-aulas-dadas">0</span>
                                        <span class="stat-mini-label">Aulas Dadas</span>
                                    </div>
                                    <div class="stat-mini">
                                        <span class="stat-mini-value" id="stat-horas-mes">0h</span>
                                        <span class="stat-mini-label">Horas/Mês</span>
                                    </div>
                                    <div class="stat-mini">
                                        <span class="stat-mini-value" id="stat-tarefas-pendentes">0</span>
                                        <span class="stat-mini-label">Tarefas Pendentes</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Parâmetros (Admin Only) -->
                        <div class="card admin-only">
                            <div class="card-header">
                                <h3 class="card-title"><i class="bi bi-sliders"></i> Parâmetros do Sistema</h3>
                            </div>
                            <div class="card-body" id="parametros-container">
                                <!-- Parâmetros via JS -->
                            </div>
                        </div>
                    </div>

                </section>
            </div>
        </main>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="bi bi-check-circle"></i>
        <span></span>
    </div>

    <!-- Scripts -->
    <script src="api.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/turmas.js"></script>
    <script src="js/cursos.js"></script>
    <script src="js/cronograma.js"></script>
    <script src="js/professores.js"></script>
    <script src="js/relatorios.js"></script>
    <script src="js/configuracoes.js"></script>
    <script src="app.js"></script>
</body>

</html>